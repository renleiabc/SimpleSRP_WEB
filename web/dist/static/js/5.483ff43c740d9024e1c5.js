webpackJsonp([5],{EWQb:function(e,t,a){var s=a("gytX"),i=s.number,o=a("AOV1"),r=i.parsePercent,n=a("Ori0");s.extendChartView({type:"liquidFill",render:function(e,t,a){var i=this.group;i.removeAll();var l=e.getData(),u=l.getItemModel(0),p=u.get("center"),c=u.get("radius"),m=a.getWidth(),d=a.getHeight(),g=Math.min(m,d),h=0,v=0,y=e.get("outline.show");y&&(h=e.get("outline.borderDistance"),v=r(e.get("outline.itemStyle.borderWidth"),g));var _,b,f,C=r(p[0],m),w=r(p[1],d),M=!1,x=e.get("shape");("container"===x?(M=!0,b=[(_=[m/2,d/2])[0]-v/2,_[1]-v/2],f=[r(h,m),r(h,d)],c=[Math.max(b[0]-f[0],0),Math.max(b[1]-f[1],0)]):(b=(_=r(c,g)/2)-v/2,f=r(h,g),c=Math.max(b-f,0)),y)&&(L().style.lineWidth=v,i.add(L()));var N=M?0:C-c,S=M?0:w-c,A=null;i.add(function(){var t=P(c);t.setStyle(e.getModel("backgroundStyle").getItemStyle()),t.style.fill=null,t.z2=5;var a=P(c);a.setStyle(e.getModel("backgroundStyle").getItemStyle()),a.style.stroke=null;var i=new s.graphic.Group;return i.add(t),i.add(a),i}());var I=this._data,F=[];function P(e,t){if(x){if(0===x.indexOf("path://")){var a=s.graphic.makePath(x.slice(7),{}),i=a.getBoundingRect(),r=i.width,n=i.height;r>n?(n*=2*e/r,r=2*e):(r*=2*e/n,n=2*e);var l=t?0:C-r/2,u=t?0:w-n/2;return a=s.graphic.makePath(x.slice(7),{},new s.graphic.BoundingRect(l,u,r,n)),t&&(a.position=[-r/2,-n/2]),a}if(M){var p=t?-e[0]:C-e[0],c=t?-e[1]:w-e[1];return o.createSymbol("rect",p,c,2*e[0],2*e[1])}p=t?-e:C-e,c=t?-e:w-e;return"pin"===x?c+=e:"arrow"===x&&(c-=e),o.createSymbol(x,p,c,2*e,2*e)}return new s.graphic.Circle({shape:{cx:t?0:C,cy:t?0:w,r:e}})}function L(){var t=P(_);return t.style.fill=null,t.setStyle(e.getModel("outline.itemStyle").getItemStyle()),t}function D(t,a,i){var o=M?c[0]:c,u=M?d/2:c,p=l.getItemModel(t),m=p.getModel("itemStyle"),g=p.get("phase"),h=r(p.get("amplitude"),2*u),v=r(p.get("waveLength"),2*o),y=u-l.get("value",t)*u*2;g=i?i.shape.phase:"auto"===g?t*Math.PI/4:g;var _=m.getItemStyle();if(!_.fill){var b=e.get("color"),f=t%b.length;_.fill=b[f]}var x=new n({shape:{waveLength:v,radius:o,radiusY:u,cx:2*o,cy:0,waterLevel:y,amplitude:h,phase:g,inverse:a},style:_,position:[C,w]});x.shape._waterLevel=y;var N=p.getModel("emphasis.itemStyle").getItemStyle();N.lineWidth=0,s.graphic.setHoverStyle(x,N);var S=P(c,!0);return S.setStyle({fill:"white"}),x.setClipPath(S),x}function j(e,t,a){var s=l.getItemModel(e),i=s.get("period"),o=s.get("direction"),r=l.get("value",e),n=s.get("phase");n=a?a.shape.phase:"auto"===n?e*Math.PI/4:n;var u=0;u="auto"===i?function(t){var a=l.count();return 0===a?t:t*(.2+(a-e)/a*.8)}(5e3):"function"==typeof i?i(r,e):i;var p=0;"right"===o||null==o?p=Math.PI:"left"===o?p=-Math.PI:"none"===o?p=0:console.error("Illegal direction value for liquid fill."),"none"!==o&&s.get("waveAnimation")&&t.animate("shape",!0).when(0,{phase:n}).when(u/2,{phase:p+n}).when(u,{phase:2*p+n}).during(function(){A&&A.dirty(!0)}).start()}l.diff(I).add(function(t){var a=D(t,!1),o=a.shape.waterLevel;a.shape.waterLevel=M?d/2:c,s.graphic.initProps(a,{shape:{waterLevel:o}},e),a.z2=2,j(t,a,null),i.add(a),l.setItemGraphicEl(t,a),F.push(a)}).update(function(t,a){for(var o=I.getItemGraphicEl(a),r=D(t,!1,o),n={},u=["amplitude","cx","cy","phase","radius","radiusY","waterLevel","waveLength"],p=0;p<u.length;++p){var c=u[p];r.shape.hasOwnProperty(c)&&(n[c]=r.shape[c])}var m={},g=["fill","opacity","shadowBlur","shadowColor"];for(p=0;p<g.length;++p){c=g[p];r.style.hasOwnProperty(c)&&(m[c]=r.style[c])}M&&(n.radiusY=d/2),s.graphic.updateProps(o,{shape:n,style:m},e),o.position=r.position,o.setClipPath(r.clipPath),o.shape.inverse=r.inverse,j(t,o,o),i.add(o),l.setItemGraphicEl(t,o),F.push(o)}).remove(function(e){var t=I.getItemGraphicEl(e);i.remove(t)}).execute(),u.get("label.show")&&i.add(function(t){var a=u.getModel("label");var i={z2:10,shape:{x:N,y:S,width:2*(M?c[0]:c),height:2*(M?c[1]:c)},style:{fill:"transparent",text:function(){var t=e.getFormattedLabel(0,"normal"),a=100*l.get("value",0),s=l.getName(0)||e.name;isNaN(a)||(s=a.toFixed(0)+"%");return null==t?s:t}(),textAlign:a.get("align"),textVerticalAlign:a.get("baseline")},silent:!0},o=new s.graphic.Rect(i),r=a.get("color");s.graphic.setText(o.style,a,r);var n=new s.graphic.Rect(i),p=a.get("insideColor");s.graphic.setText(n.style,a,p),n.style.textFill=p;var m=new s.graphic.Group;m.add(o),m.add(n);var d=P(c,!0);return(A=new s.graphic.CompoundPath({shape:{paths:t},position:[C,w]})).setClipPath(d),n.setClipPath(A),m}(F)),this._data=l},dispose:function(){}})},GBKq:function(e,t,a){var s=a("pI8z"),i=a("gytX");i.extendSeriesModel({type:"series.liquidFill",visualColorAccessPath:"textStyle.normal.color",optionUpdated:function(){var e=this.option;e.gridSize=Math.max(Math.floor(e.gridSize),4)},getInitialData:function(e,t){var a=s(["value"],e.data),o=new i.List(a,this);return o.initData(e.data),o},defaultOption:{color:["#294D99","#156ACF","#1598ED","#45BDFF"],center:["50%","50%"],radius:"50%",amplitude:"8%",waveLength:"80%",phase:"auto",period:"auto",direction:"right",shape:"circle",waveAnimation:!0,animationEasing:"linear",animationEasingUpdate:"linear",animationDuration:2e3,animationDurationUpdate:1e3,outline:{show:!0,borderDistance:8,itemStyle:{color:"none",borderColor:"#294D99",borderWidth:8,shadowBlur:20,shadowColor:"rgba(0, 0, 0, 0.25)"}},backgroundStyle:{color:"#E3F7FF"},itemStyle:{opacity:.95,shadowBlur:50,shadowColor:"rgba(0, 0, 0, 0.4)"},label:{show:!0,color:"#294D99",insideColor:"#fff",fontSize:50,fontWeight:"bold",align:"center",baseline:"middle",position:"inside"},emphasis:{itemStyle:{opacity:.8}}}})},Hb2s:function(e,t,a){var s=a("gytX");a("GBKq"),a("EWQb"),s.registerVisual(s.util.curry(a("67b/"),"liquidFill"))},Ori0:function(e,t,a){var s=a("gytX");function i(e,t,a,s){return 0===t?[[e+.5*a/Math.PI/2,s/2],[e+.5*a/Math.PI,s],[e+a/4,s]]:1===t?[[e+.5*a/Math.PI/2*(Math.PI-2),s],[e+.5*a/Math.PI/2*(Math.PI-1),s/2],[e+a/4,0]]:2===t?[[e+.5*a/Math.PI/2,-s/2],[e+.5*a/Math.PI,-s],[e+a/4,-s]]:[[e+.5*a/Math.PI/2*(Math.PI-2),-s],[e+.5*a/Math.PI/2*(Math.PI-1),-s/2],[e+a/4,0]]}e.exports=s.graphic.extendShape({type:"ec-liquid-fill",shape:{waveLength:0,radius:0,radiusY:0,cx:0,cy:0,waterLevel:0,amplitude:0,phase:0,inverse:!1},buildPath:function(e,t){null==t.radiusY&&(t.radiusY=t.radius);for(var a=Math.max(2*Math.ceil(2*t.radius/t.waveLength*4),8);t.phase<2*-Math.PI;)t.phase+=2*Math.PI;for(;t.phase>0;)t.phase-=2*Math.PI;var s=t.phase/Math.PI/2*t.waveLength,o=t.cx-t.radius+s-2*t.radius;e.moveTo(o,t.waterLevel);for(var r=0,n=0;n<a;++n){var l=n%4,u=i(n*t.waveLength/4,l,t.waveLength,t.amplitude);e.bezierCurveTo(u[0][0]+o,-u[0][1]+t.waterLevel,u[1][0]+o,-u[1][1]+t.waterLevel,u[2][0]+o,-u[2][1]+t.waterLevel),n===a-1&&(r=u[2][0])}t.inverse?(e.lineTo(r+o,t.cy-t.radiusY),e.lineTo(o,t.cy-t.radiusY),e.lineTo(o,t.waterLevel)):(e.lineTo(r+o,t.cy+t.radiusY),e.lineTo(o,t.cy+t.radiusY),e.lineTo(o,t.waterLevel)),e.closePath()}})},QZKG:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});a("g/bT");var s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"systemMonitoringPage"},[a("div",{staticClass:"v-line"},[a("h6",[e._v(e._s(e.$t("views.systemMonitoring.systemSource.title")))]),e._v(" "),a("div",{staticClass:"record-detail",on:{click:e.goRecordList}},[a("i",{staticClass:"el-icon-edit"}),e._v(" "),a("span",[e._v("记录详情")])]),e._v(" "),a("el-row",[a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("div",{staticClass:"chart-title"},[e._v("\n          CPU "),a("span",{staticClass:"real-value"},[e._v(e._s(e.cpuUsedNum)+" Core")]),e._v(" /\n          "),a("span",{staticClass:"total-value"},[e._v(e._s(e.cpuAllNum)+" Core")])]),e._v(" "),a("div",{staticClass:"chart-item"},[a("sedu-echarts",{attrs:{domId:"cpu",cname:e.cpuClass,option:e.cpuOption}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"label-box"},[a("img",{staticClass:"bottom-line",attrs:{src:e.mixinGetImage("views/global/","bottom_line.png"),alt:""}}),e._v(" "),a("div",{staticClass:"bottom-label"},[a("div",{on:{click:e.goPersonList}},[e._v("\n                "+e._s(e.$t("views.systemMonitoring.personal.label"))+"\n                "),a("span",{staticClass:"link-text"},[e._v(e._s(e.personalCpu.toFixed(1))+"%")])]),e._v(" "),a("div",{on:{click:e.goProjectList}},[e._v("\n                "+e._s(e.$t("views.systemMonitoring.project.label"))+"\n                "),a("span",{staticClass:"link-text"},[e._v(e._s(e.projectCpu.toFixed(1))+"%")])])])])],1)]),e._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("div",{staticClass:"chart-title"},[e._v("\n          "+e._s(e.$t("views.systemMonitoring.systemSource.memory"))+"\n          "),a("span",{staticClass:"real-value"},[e._v(e._s(e.memoryUsedNum)+" G")]),e._v(" /\n          "),a("span",{staticClass:"total-value"},[e._v(e._s(e.memoryAllNum)+" G")])]),e._v(" "),a("div",{staticClass:"chart-item"},[a("sedu-echarts",{attrs:{domId:"memory",cname:e.memoryClass,option:e.memoryOption}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"label-box"},[a("img",{staticClass:"bottom-line",attrs:{src:e.mixinGetImage("views/global/","bottom_line.png"),alt:""}}),e._v(" "),a("div",{staticClass:"bottom-label"},[a("div",{on:{click:e.goPersonList}},[e._v("\n                "+e._s(e.$t("views.systemMonitoring.personal.label"))+"\n                "),a("span",{staticClass:"link-text"},[e._v(e._s(e.personalMemory.toFixed(1))+"%")])]),e._v(" "),a("div",{on:{click:e.goProjectList}},[e._v("\n                "+e._s(e.$t("views.systemMonitoring.project.label"))+"\n                "),a("span",{staticClass:"link-text"},[e._v(e._s(e.projectMemory.toFixed(1))+"%")])])])])],1)]),e._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:8}},[a("div",{staticClass:"chart-title"},[e._v("\n          GPU "),a("span",{staticClass:"real-value"},[e._v(e._s(e.gpuUsedNum)+" 个")]),e._v(" /\n          "),a("span",{staticClass:"total-value"},[e._v(e._s(e.gpuAllNum)+" 个")])]),e._v(" "),a("div",{staticClass:"chart-item"},[a("sedu-echarts",{attrs:{domId:"gpu",cname:e.memoryClass,option:e.gpuOption}}),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasData,expression:"hasData"}],staticClass:"label-box"},[a("img",{staticClass:"bottom-line",attrs:{src:e.mixinGetImage("views/global/","bottom_line.png"),alt:""}}),e._v(" "),a("div",{staticClass:"bottom-label"},[a("div",{on:{click:e.goPersonList}},[e._v("\n                "+e._s(e.$t("views.systemMonitoring.personal.label"))+"\n                "),a("span",{staticClass:"link-text"},[e._v(e._s(e.personalGpu.toFixed(1))+"%")])]),e._v(" "),a("div",{on:{click:e.goProjectList}},[e._v("\n                "+e._s(e.$t("views.systemMonitoring.project.label"))+"\n                "),a("span",{staticClass:"link-text"},[e._v(e._s(e.projectGpu.toFixed(1))+"%")])])])])],1)])],1)],1),e._v(" "),a("div",{staticClass:"v-pie"},[a("el-row",[a("el-col",{staticClass:"chart-item",attrs:{span:12}},[a("h6",[e._v(e._s(e.$t("views.systemMonitoring.images.title")))]),e._v(" "),a("sedu-echarts",{attrs:{domId:"iamges",myStyle:e.pie_pro_sty,option:e.option5}})],1),e._v(" "),a("div",{staticClass:"middle-line"}),e._v(" "),a("el-col",{staticClass:"text-center",attrs:{span:12}},[a("h6",[e._v(e._s(e.$t("views.systemMonitoring.storages.title")))]),e._v(" "),a("sedu-echarts",{attrs:{domId:"storages",myStyle:e.pie_pro_sty,option:e.option6}})],1)],1)],1)])},staticRenderFns:[]},i=a("C7Lr")({name:"systemMonitoring",data:function(){return{cpuClass:"v-cpu",memoryClass:"v-memory",gpuClass:"v-gpu",cpuOption:{},memoryOption:{},gpuOption:{},option5:{},option6:{},cpuAllNum:0,cpuUsedNum:0,memoryUsedNum:0,memoryAllNum:0,gpuUsedNum:0,gpuAllNum:0,cpuUnassigned:0,cpuAssigned:0,memoryUnassigned:0,memoryAssigned:0,gpuUnassigned:0,gpuAssigned:0,personalCpu:0,projectCpu:0,personalMemory:0,projectMemory:0,personalGpu:0,projectGpu:0,pie_pro_sty:"width:40vw;height:40vh;",hasData:!1}},methods:{goRecordList:function(){this.$router.push({name:"recordList",params:{userId:123}})},goPersonList:function(){this.$router.push({name:"personList"})},goProjectList:function(){this.$router.push({name:"projectList",params:{userId:123}})},chartInit:function(e){if(e){var t=this.$t("views.systemMonitoring.systemSource.assignedResource");this.cpuAssigned.toFixed(1),this.memoryAssigned.toFixed(1),this.gpuAssigned.toFixed(1),this.cpuOption={series:[{type:"liquidFill",data:e.cpuData,center:["50%","46%"],radius:"80%",color:["#7CBDFE","#91C8FF","#BADCFF"],outline:{borderDistance:9,itemStyle:{borderWidth:6,borderColor:"#9ccdfe",shadowBlur:0}},itemStyle:{shadowBlur:0},backgroundStyle:{color:"#E3F7FF"},label:{normal:{position:["50%","85%"],formatter:function(e){return t},insideColor:"#2E5199",fontSize:14}}}]},this.memoryOption={series:[{type:"liquidFill",data:e.memoryData,center:["50%","46%"],radius:"80%",color:["#6fd9bf","#7bebcf","#A1EEDA"],outline:{borderDistance:9,itemStyle:{borderWidth:6,borderColor:"#83DFC8",shadowBlur:0}},itemStyle:{shadowBlur:0},backgroundStyle:{color:"#E3F7FF"},label:{normal:{position:["50%","85%"],formatter:function(e){return t},insideColor:"#2E5199",fontSize:14}}}]},this.gpuOption={series:[{type:"liquidFill",data:e.gpuData,center:["50%","46%"],radius:"80%",color:["#FFC182","#FFCE9C","#FCD5AF"],outline:{borderDistance:9,itemStyle:{borderWidth:6,borderColor:"#FFC182",shadowBlur:0}},itemStyle:{shadowBlur:0},backgroundStyle:{color:"#E3F7FF"},label:{normal:{position:["50%","85%"],formatter:function(e){return t},insideColor:"#2E5199",fontSize:14}}}]}}},pieChartInit:function(e){if(e){var t=this.$t("views.systemMonitoring.images.title"),a=this.$t("views.systemMonitoring.storages.title"),s=this.$t("views.systemMonitoring.images.publicImage"),i=this.$t("views.systemMonitoring.images.personalImage"),o=this.$t("views.systemMonitoring.images.projectImage"),r=this.$t("views.systemMonitoring.storages.publicStorage"),n=this.$t("views.systemMonitoring.storages.personalStorage"),l=this.$t("views.systemMonitoring.storages.projectStorage");this.option5={title:{text:e.imagesCount.numAll,left:"center",top:"middle",textStyle:{lineHeight:50,fontSize:18,color:"#111"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {d}%"},legendHoverLink:!1,hoverAnimation:!1,series:[{name:t,type:"pie",radius:["50%","65%"],label:{normal:{formatter:"{b|{b} ：}{c} ",rich:{b:{fontSize:16,lineHeight:33}}}},labelLine:{normal:{show:!0}},data:[{value:e.imagesCount.publiceNum,name:s},{value:e.imagesCount.personalNum,name:i},{value:e.imagesCount.projectNum,name:o},{value:e.imagesCount.bianNum,name:"编排镜像"}]}],color:["#f25d59","#83dfc8","#ba99bc","#f4b54f"]},this.option6={title:{text:e.storageCount.allNumStr,left:"center",top:"middle",textStyle:{lineHeight:50,fontSize:18,color:"#111"}},tooltip:{trigger:"item",formatter:"{a} <br/>{b}: {d}%"},legendHoverLink:!1,hoverAnimation:!1,series:[{name:a,type:"pie",radius:["50%","65%"],label:{normal:{formatter:"{b|{b} ：}{c} ",rich:{b:{fontSize:16,lineHeight:33}}}},labelLine:{normal:{show:!0}},data:[{value:e.storageCount.publiceNum,name:r},{value:e.storageCount.personalNum,name:n},{value:e.storageCount.projectNum,name:l}]}],color:["#f7a31c","#2ba1e4","#00b285"]}}}},created:function(){var e=this,t={};this.$get("/system/hypervisor").then(function(a){var s=e.$t("views.systemMonitoring.images.numAllStr"),i=e.$t("views.systemMonitoring.images.ge"),o=s+"\n"+a.data.count_image_total+i;t.imagesCount={numAll:o,personalNum:a.data.my_image_count_total,projectNum:a.data.project_image_count_total,publiceNum:a.data.public_image_count_total,bianNum:a.data.bian_image_count_total||0};var r=e.$t("views.systemMonitoring.storages.nunAllStr")+"\n"+a.data.storage_count_total+i;t.storageCount={allNumStr:r,personalNum:a.data.my_storage_count_total,projectNum:a.data.project_storage_count_total,publiceNum:a.data.public_storage_count_total},e.pieChartInit(t)}),this.$get("/system/getsystemresources").then(function(t){var a=t.data;a&&(e.hasData=!0),e.cpuUsedNum=a.cpu_ram_info.cpu_cpu_used,e.cpuAllNum=a.cpu_ram_info.cpu_core_total,e.memoryUsedNum=(a.cpu_ram_info.mem_used-0).toFixed(1),e.memoryAllNum=(a.cpu_ram_info.mem_total-0).toFixed(1),e.gpuUsedNum=a.gpu.used,e.gpuAllNum=a.gpu.num_all,e.cpuAssigned=e.cpuAllNum?e.cpuUsedNum/e.cpuAllNum*100:0,e.memoryAssigned=e.memoryAllNum?e.memoryUsedNum/e.memoryAllNum*100:0,e.gpuAssigned=e.gpuAllNum?e.gpuUsedNum/e.gpuAllNum*100:0,e.cpuUnassigned=100-e.cpuAssigned,e.memoryUnassigned=100-e.memoryAssigned,e.gpuUnassigned=100-e.gpuAssigned,e.personalCpu=e.cpuAllNum?a.personal_ns_cpu_use/e.cpuAllNum*100:0,e.projectCpu=e.cpuAllNum?a.project_ns_cpu_use/e.cpuAllNum*100:0,e.personalMemory=e.memoryAllNum?a.personal_ns_memory_use/e.memoryAllNum*100:0,e.projectMemory=e.memoryAllNum?a.project_ns_memory_use/e.memoryAllNum*100:0,e.personalGpu=e.gpuAllNum?a.personal_ns_gpu_use/e.gpuAllNum*100:0,e.projectGpu=e.gpuAllNum?a.project_ns_gpu_use/e.gpuAllNum*100:0,a.cpuData=[],a.memoryData=[],a.gpuData=[],(e.personalCpu>0||e.projectCpu>0)&&(a.cpuData.push(e.personalCpu/100,e.projectCpu/100),a.cpuData.sort(function(e,t){return t-e})),(e.personalMemory>0||e.projectMemory>0)&&(a.memoryData.push(e.personalMemory/100,e.projectMemory/100),a.memoryData.sort(function(e,t){return t-e})),(e.personalGpu>=0||e.projectGpu>0)&&(a.gpuData.push(e.personalGpu/100,e.projectGpu/100),a.gpuData.sort(function(e,t){return t-e})),e.chartInit(a)})}},s,!1,null,null,null);t.default=i.exports},"g/bT":function(e,t,a){e.exports=a("Hb2s")}});